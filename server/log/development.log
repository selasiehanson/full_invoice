  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateClients (20161221212136)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "clients" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "email" varchar, "phone_number" varchar, "address" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161221212136"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateCurrencies (20161221212253)
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "currencies" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "country" varchar, "iso_alpha2" varchar, "iso_alpha3" varchar, "iso_numeric" varchar, "currency_name" varchar, "currency_code" varchar, "symbol" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161221212253"]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateProducts (20161221212452)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" varchar, "text" varchar, "product_type" varchar, "reorder_level" integer, "can_be_sold" boolean, "can_be_purchased" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161221212452"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTaxes (20161221221951)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "taxes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "description" varchar, "text" varchar, "amount" decimal(5,2), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161221221951"]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccounts (20161221223439)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organization_name" varchar, "business_email" varchar, "created_by" integer, "enabled" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161221223439"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateUsers (20161221223505)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "password" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161221223505"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateAccountDetails (20161221224327)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "account_details" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "account_id" integer, "role" varchar, "enabled" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_account_details_on_user_id" ON "account_details" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_account_details_on_account_id" ON "account_details" ("account_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161221224327"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
Migrating to RenamePasswordToPasswordDigestOnUsers (20161224130412)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TEMPORARY TABLE "ausers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "password_digest" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "ausers" ("id","email","password_digest","created_at","updated_at")
                     SELECT "id","email","password","created_at","updated_at" FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar, "password_digest" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "users" ("id","email","password_digest","created_at","updated_at")
                     SELECT "id","email","password_digest","created_at","updated_at" FROM "ausers"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "ausers"[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161224130412"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddFirstNameAndLastNameToUser (20161224140341)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "first_name" varchar[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "last_name" varchar[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161224140341"]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddAccountToTax (20161224162916)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "taxes" ADD "account_id" integer[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_taxes_on_account_id" ON "taxes" ("account_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161224162916"]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddAccountToProduct (20161224162954)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "products" ADD "account_id" integer[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_products_on_account_id" ON "products" ("account_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161224162954"]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddAccountToClient (20161224163029)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "clients" ADD "account_id" integer[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_clients_on_account_id" ON "clients" ("account_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161224163029"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", 2016-12-26 16:17:48 UTC], ["updated_at", 2016-12-26 16:17:48 UTC]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInvoices (20161226162323)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "invoices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "account_id" integer, "due_date" datetime, "invoice_date" datetime, "client_id" integer, "notes" text, "currency_id" integer, "invoice_number" varchar, "total_amount" decimal, "total_tax" decimal, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoices_on_account_id" ON "invoices" ("account_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoices_on_client_id" ON "invoices" ("client_id")[0m
  [1m[35m (0.0ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoices_on_currency_id" ON "invoices" ("currency_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226162323"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateInvoiceLines (20161226162340)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "invoice_lines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "invoice_id" integer, "product_id" integer, "description" varchar, "string" varchar, "[]" varchar, "quantity" varchar, "discount_percentage" decimal, "discount_flat" decimal, "price" decimal, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_invoice_lines_on_invoice_id" ON "invoice_lines" ("invoice_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoice_lines_on_product_id" ON "invoice_lines" ("product_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226162340"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInvoiceLines (20161226162340)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE "invoice_lines"[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20161226162340"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInvoiceLines (20161226162340)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "invoice_lines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "invoice_id" integer, "product_id" integer, "description" varchar, "quantity" integer, "discount_percentage" decimal, "discount_flat" decimal, "price" decimal, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoice_lines_on_invoice_id" ON "invoice_lines" ("invoice_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoice_lines_on_product_id" ON "invoice_lines" ("product_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226162340"]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
Started POST "/7/invoices" for ::1 at 2016-12-26 16:52:05 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>3, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"7"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 36ms (ActiveRecord: 0.9ms)


Started POST "/register" for ::1 at 2016-12-26 16:52:17 +0000
Processing by SessionController#register as */*
  Parameters: {"credentials"=>{"first_name"=>"kofi", "last_name"=>"Owusu", "email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]", "organization_name"=>"Ben Jo Ent"}, "session"=>{"credentials"=>{"first_name"=>"kofi", "last_name"=>"Owusu", "email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]", "organization_name"=>"Ben Jo Ent"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", nil], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.1ms)


  
NoMethodError (undefined method `accounts' for nil:NilClass):
  
app/controllers/application_controller.rb:8:in `switch_tenant'
Started POST "/register" for ::1 at 2016-12-26 16:55:02 +0000
Processing by SessionController#register as */*
  Parameters: {"credentials"=>{"first_name"=>"kofi", "last_name"=>"Owusu", "email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]", "organization_name"=>"Ben Jo Ent"}, "session"=>{"credentials"=>{"first_name"=>"kofi", "last_name"=>"Owusu", "email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]", "organization_name"=>"Ben Jo Ent"}}}
Unpermitted parameter: organization_name
Unpermitted parameters: first_name, last_name, email, password
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mUser Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "password_digest", "created_at", "updated_at", "first_name", "last_name") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "kofiowusu@mail.com"], ["password_digest", "$2a$10$hDB5g8NIcMGHF5u8Q2CzVOIYDrP16r3211DrxrIMrNBnohbLDR/aS"], ["created_at", 2016-12-26 16:55:02 UTC], ["updated_at", 2016-12-26 16:55:02 UTC], ["first_name", "kofi"], ["last_name", "Owusu"]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("organization_name", "created_by", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organization_name", "Ben Jo Ent"], ["created_by", 1], ["created_at", 2016-12-26 16:55:02 UTC], ["updated_at", 2016-12-26 16:55:02 UTC]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "account_details" ("user_id", "account_id", "role", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["user_id", 1], ["account_id", 1], ["role", "admin"], ["created_at", 2016-12-26 16:55:02 UTC], ["updated_at", 2016-12-26 16:55:02 UTC]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.2ms)
Completed 201 Created in 136ms (Views: 5.2ms | ActiveRecord: 5.4ms)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mAccountDetail Load (0.2ms)[0m  [1m[34mSELECT "account_details".* FROM "account_details" WHERE "account_details"."user_id" = 1[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = 1[0m
Started POST "/user_token" for ::1 at 2016-12-26 16:58:05 +0000
Processing by UserTokenController#create as */*
  Parameters: {"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}, "user_token"=>{"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.com"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Knock::AuthToken (0.1ms)
Completed 201 Created in 74ms (Views: 2.5ms | ActiveRecord: 0.3ms)


Started POST "/7/invoices" for ::1 at 2016-12-26 16:58:48 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>3, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Filter chain halted as :switch_tenant rendered or redirected
Completed 401 Unauthorized in 43ms (Views: 0.2ms | ActiveRecord: 0.5ms)


Started POST "/1/invoices" for ::1 at 2016-12-26 16:58:55 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>3, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameters: due_date, invoice_lines
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 471ms (ActiveRecord: 0.8ms)


  
ActiveRecord::RecordInvalid (Validation failed: Account must exist, Client must exist, Currency must exist):
  
app/presenters/invoice_presenter.rb:10:in `block in save'
app/presenters/invoice_presenter.rb:9:in `save'
app/controllers/invoices_controller.rb:10:in `create'
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "currencies" ("country", "iso_alpha2", "iso_alpha3", "iso_numeric", "currency_name", "currency_code", "symbol", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["country", "GHANA"], ["iso_alpha2", "GH"], ["iso_alpha3", "GHA"], ["iso_numeric", "288"], ["currency_name", "CEDI"], ["currency_code", "GHS"], ["symbol", ""], ["created_at", 2016-12-26 17:00:53 UTC], ["updated_at", 2016-12-26 17:00:53 UTC]]
  [1m[35m (0.7ms)[0m  [1m[36mcommit transaction[0m
Started POST "/1/invoices" for ::1 at 2016-12-26 17:00:58 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>3, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameters: due_date, invoice_lines
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 9ms (ActiveRecord: 0.5ms)


  
ActiveRecord::RecordInvalid (Validation failed: Account must exist, Client must exist, Currency must exist):
  
app/presenters/invoice_presenter.rb:10:in `block in save'
app/presenters/invoice_presenter.rb:9:in `save'
app/controllers/invoices_controller.rb:10:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 17:02:19 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>3, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameters: due_date, invoice_lines
Completed 500 Internal Server Error in 36ms (ActiveRecord: 1.6ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'account_id' for InvoicePresenter.):
  
app/controllers/invoices_controller.rb:9:in `new'
app/controllers/invoices_controller.rb:9:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 17:02:33 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>3, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameters: due_date, invoice_lines
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 68ms (ActiveRecord: 2.5ms)


  
ActiveRecord::RecordInvalid (Validation failed: Account must exist, Client must exist, Currency must exist):
  
app/presenters/invoice_presenter.rb:11:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/clients" for ::1 at 2016-12-26 17:02:53 +0000
Processing by ClientsController#create as */*
  Parameters: {"client"=>{"name"=>"Peter", "phone_number"=>"0123456789", "email"=>"samza@mailx.com", "address"=>"some 1234 street bi"}, "tenant_id"=>"1"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms)


Started POST "/1/clients" for ::1 at 2016-12-26 17:03:02 +0000
Processing by ClientsController#create as */*
  Parameters: {"client"=>{"name"=>"Peter", "phone_number"=>"0123456789", "email"=>"samza@mailx.com", "address"=>"some 1234 street bi"}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "clients" WHERE "clients"."email" = ? LIMIT ?[0m  [["email", "samza@mailx.com"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "clients" ("name", "email", "phone_number", "address", "created_at", "updated_at", "account_id") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Peter"], ["email", "samza@mailx.com"], ["phone_number", "0123456789"], ["address", "some 1234 street bi"], ["created_at", 2016-12-26 17:03:02 UTC], ["updated_at", 2016-12-26 17:03:02 UTC], ["account_id", 1]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Client (0.5ms)
Completed 200 OK in 29ms (Views: 7.9ms | ActiveRecord: 2.4ms)


Started POST "/1/invoices" for ::1 at 2016-12-26 17:03:09 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>3, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameters: due_date, invoice_lines
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 9ms (ActiveRecord: 0.5ms)


  
ActiveRecord::RecordInvalid (Validation failed: Account must exist, Client must exist, Currency must exist):
  
app/presenters/invoice_presenter.rb:11:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 17:03:16 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameters: due_date, invoice_lines
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 10ms (ActiveRecord: 0.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Account must exist, Client must exist, Currency must exist):
  
app/presenters/invoice_presenter.rb:11:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 17:04:09 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameters: due_date, invoice_lines
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 62ms (ActiveRecord: 3.2ms)


  
ActiveRecord::RecordInvalid (Validation failed: Account must exist):
  
app/presenters/invoice_presenter.rb:11:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 17:04:20 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameters: due_date, invoice_lines
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 17:04:20 UTC], ["updated_at", 2016-12-26 17:04:20 UTC]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 67ms (ActiveRecord: 3.7ms)


  
NoMethodError (undefined method `map' for nil:NilClass
Did you mean?  tap):
  
app/presenters/invoice_presenter.rb:12:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 17:05:08 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameters: due_date, invoice_lines
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 17:05:08 UTC], ["updated_at", 2016-12-26 17:05:08 UTC]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 66ms (ActiveRecord: 3.7ms)


  
NoMethodError (undefined method `map' for nil:NilClass
Did you mean?  tap):
  
app/presenters/invoice_presenter.rb:13:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 17:05:48 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (1.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: invoice_lines
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 17:05:49 UTC], ["updated_at", 2016-12-26 17:05:49 UTC]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 81ms (ActiveRecord: 5.8ms)


  
NoMethodError (undefined method `map' for nil:NilClass
Did you mean?  tap):
  
app/presenters/invoice_presenter.rb:13:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 17:10:05 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.2ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 17:10:06 UTC], ["updated_at", 2016-12-26 17:10:06 UTC]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 75ms (ActiveRecord: 4.9ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'product_id' for InvoicePresenter.):
  
app/presenters/invoice_presenter.rb:14:in `new'
app/presenters/invoice_presenter.rb:14:in `block (2 levels) in save'
app/presenters/invoice_presenter.rb:13:in `map'
app/presenters/invoice_presenter.rb:13:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 17:11:01 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 17:11:01 UTC], ["updated_at", 2016-12-26 17:11:01 UTC]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 73ms (ActiveRecord: 4.4ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/presenters/invoice_presenter.rb:14:in `initialize'
app/presenters/invoice_presenter.rb:14:in `new'
app/presenters/invoice_presenter.rb:14:in `block (2 levels) in save'
app/presenters/invoice_presenter.rb:13:in `map'
app/presenters/invoice_presenter.rb:13:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 17:11:37 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 17:11:37 UTC], ["updated_at", 2016-12-26 17:11:37 UTC]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
Completed 500 Internal Server Error in 96ms (ActiveRecord: 5.6ms)


  
NoMethodError (undefined method `invoices' for #<Account:0x007fd13ae4fda0>):
  
app/controllers/invoices_controller.rb:12:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 17:12:09 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 17:12:09 UTC], ["updated_at", 2016-12-26 17:12:09 UTC]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 2], ["LIMIT", 1]]
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (0.2ms)
Completed 201 Created in 122ms (Views: 16.4ms | ActiveRecord: 6.0ms)


Started POST "/1/invoices" for ::1 at 2016-12-26 17:13:57 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 17:13:57 UTC], ["updated_at", 2016-12-26 17:13:57 UTC]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 3], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.2ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 3]]
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (4.72ms)
Completed 201 Created in 118ms (Views: 9.3ms | ActiveRecord: 6.0ms)


Started GET "/7/invoices" for ::1 at 2016-12-26 17:14:46 +0000
Processing by InvoicesController#index as */*
  Parameters: {"tenant_id"=>"7"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Filter chain halted as :switch_tenant rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.2ms)


Started GET "/1/invoices" for ::1 at 2016-12-26 17:14:51 +0000
Processing by InvoicesController#index as */*
  Parameters: {"tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[36mInvoiceLine Load (0.6ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" IN (1, 2, 3)[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (4.44ms)
Completed 200 OK in 19ms (Views: 14.3ms | ActiveRecord: 1.0ms)


Started POST "/1/invoices" for ::1 at 2016-12-26 17:15:35 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.2ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 17:15:35 UTC], ["updated_at", 2016-12-26 17:15:35 UTC]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (5.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.2ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 4]]
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (3.8ms)
Completed 201 Created in 128ms (Views: 5.9ms | ActiveRecord: 11.0ms)


Started POST "/1/invoices" for ::1 at 2016-12-26 17:18:46 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>2, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 17:18:46 UTC], ["updated_at", 2016-12-26 17:18:46 UTC]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 96ms (ActiveRecord: 5.2ms)


  
ActiveRecord::RecordInvalid (Validation failed: Invoice must exist, Product must exist):
  
app/presenters/invoice_presenter.rb:18:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/products" for ::1 at 2016-12-26 17:19:11 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Peter Bread", "description"=>"Flat and Nice and soft", "product_type"=>"consumable", "reorder_level"=>123, "can_be_sold"=>true, "can_be_purchased"=>true}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "product_type", "reorder_level", "can_be_sold", "can_be_purchased", "created_at", "updated_at", "account_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Peter Bread"], ["description", "Flat and Nice and soft"], ["product_type", "consumable"], ["reorder_level", 123], ["can_be_sold", true], ["can_be_purchased", true], ["created_at", 2016-12-26 17:19:11 UTC], ["updated_at", 2016-12-26 17:19:11 UTC], ["account_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Product (0.4ms)
Completed 200 OK in 27ms (Views: 5.4ms | ActiveRecord: 1.5ms)


Started POST "/1/invoices" for ::1 at 2016-12-26 17:19:20 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 17:19:20 UTC], ["updated_at", 2016-12-26 17:19:20 UTC]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 17ms (ActiveRecord: 2.4ms)


  
ActiveRecord::RecordInvalid (Validation failed: Invoice must exist):
  
app/presenters/invoice_presenter.rb:18:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 17:19:48 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 17:19:48 UTC], ["updated_at", 2016-12-26 17:19:48 UTC]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 93ms (ActiveRecord: 4.8ms)


  
ActiveRecord::RecordInvalid (Validation failed: Invoice must exist):
  
app/presenters/invoice_presenter.rb:19:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 23:49:56 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 23:49:57 UTC], ["updated_at", 2016-12-26 23:49:57 UTC]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 126ms (ActiveRecord: 8.9ms)


  
ActiveRecord::RecordInvalid (Validation failed: Invoice must exist):
  
app/presenters/invoice_presenter.rb:21:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 23:51:46 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 23:51:46 UTC], ["updated_at", 2016-12-26 23:51:46 UTC]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 130ms (ActiveRecord: 7.3ms)


  
ActiveRecord::RecordInvalid (Validation failed: Invoice must exist):
  
app/presenters/invoice_presenter.rb:21:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-26 23:52:22 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-26 23:52:22 UTC], ["updated_at", 2016-12-26 23:52:22 UTC]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.5ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 5], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13bda0d68,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13bda0ca0,'0.0',9(27)>], ["price", #<BigDecimal:7fd13bda0bd8,'0.1E3',9(18)>], ["created_at", 2016-12-26 23:52:22 UTC], ["updated_at", 2016-12-26 23:52:22 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 5], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.3ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 5]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 1, invoice_id: 5, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13be9ae08,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13be9ad18,'0.0',9(27)>, price: #<BigDecimal:7fd13be9ac28,'0.1E3',9(27)>, created_at: "2016-12-26 23:52:22", updated_at: "2016-12-26 23:52:22">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (25.27ms)
Completed 201 Created in 140ms (Views: 29.3ms | ActiveRecord: 9.0ms)


  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInvoiceLines (20161226162340)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "invoice_lines"[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20161226162340"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInvoices (20161226162323)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "invoices"[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20161226162323"]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInvoices (20161226162323)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "invoices" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "account_id" integer, "due_date" datetime, "invoice_date" datetime, "client_id" integer, "notes" text, "currency_id" integer, "invoice_number" varchar, "total_amount" decimal(19,2), "total_tax" decimal(19,2), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoices_on_account_id" ON "invoices" ("account_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoices_on_client_id" ON "invoices" ("client_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.0ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_invoices_on_currency_id" ON "invoices" ("currency_id")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226162323"]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateInvoiceLines (20161226162340)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "invoice_lines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "invoice_id" integer, "product_id" integer, "description" varchar, "quantity" integer, "discount_percentage" decimal, "discount_flat" decimal, "price" decimal(19,2), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoice_lines_on_invoice_id" ON "invoice_lines" ("invoice_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoice_lines_on_product_id" ON "invoice_lines" ("product_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226162340"]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
Started POST "/1/invoices" for ::1 at 2016-12-27 00:06:24 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 53ms (ActiveRecord: 1.7ms)


  
NoMethodError (undefined method `dute_date' for #<Invoice:0x007fd13bcf2bc8>
Did you mean?  due_date
               due_date=
               due_date?):
  
app/presenters/invoice_presenter.rb:11:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-27 00:07:14 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 54ms (ActiveRecord: 2.3ms)


  
NoMethodError (undefined method `dute_date' for #<Invoice:0x007fd1405ced60>
Did you mean?  due_date
               due_date=
               due_date?):
  
app/presenters/invoice_presenter.rb:11:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-27 00:07:34 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 64ms (ActiveRecord: 5.6ms)


  
TypeError (no implicit conversion of ActiveSupport::TimeWithZone into String):
  
app/models/invoice.rb:40:in `parse'
app/models/invoice.rb:40:in `valid_due_date'
app/presenters/invoice_presenter.rb:11:in `block in save'
app/presenters/invoice_presenter.rb:10:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-27 00:11:07 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
Completed 500 Internal Server Error in 45ms (ActiveRecord: 2.0ms)


  
NoMethodError (undefined method `today' for DateTime:Class):
  
app/presenters/invoice_presenter.rb:27:in `valid_due_date'
app/controllers/invoices_controller.rb:10:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-27 00:12:40 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.08ms)
Completed 422 Unprocessable Entity in 46ms (Views: 2.7ms | ActiveRecord: 2.2ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:13:45 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-27 00:13:45 UTC], ["updated_at", 2016-12-27 00:13:45 UTC]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 1], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13c59e2b8,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13c59dc00,'0.0',9(27)>], ["price", #<BigDecimal:7fd13c59d610,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:13:45 UTC], ["updated_at", 2016-12-27 00:13:45 UTC]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 1]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 1, invoice_id: 1, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13cce1ed0,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13cce1cf0,'0.0',9(27)>, price: #<BigDecimal:7fd13cce1a98,'0.1E3',9(18)>, created_at: "2016-12-27 00:13:45", updated_at: "2016-12-27 00:13:45">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (24.09ms)
Completed 201 Created in 127ms (Views: 25.3ms | ActiveRecord: 5.8ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:14:22 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-27 00:14:22 UTC], ["updated_at", 2016-12-27 00:14:22 UTC]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 2], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13ac02908,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13ac020c0,'0.0',9(27)>], ["price", #<BigDecimal:7fd13ac01148,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:14:22 UTC], ["updated_at", 2016-12-27 00:14:22 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 2], ["LIMIT", 1]]
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (11.07ms)
Completed 500 Internal Server Error in 168ms (ActiveRecord: 10.3ms)


  
NoMethodError (undefined method `tota_amount' for #<Invoice:0x007fd13c2b5fd8>
Did you mean?  total_amount
               total_amount?
               total_amount=):
  
app/controllers/invoices_controller.rb:13:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-27 00:14:32 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["created_at", 2016-12-27 00:14:32 UTC], ["updated_at", 2016-12-27 00:14:32 UTC]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 3], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13d83abb0,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13d83a458,'0.0',9(27)>], ["price", #<BigDecimal:7fd13d839fa8,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:14:32 UTC], ["updated_at", 2016-12-27 00:14:32 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 3], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 3]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 3, invoice_id: 3, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd14297b0b0,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd14297afc0,'0.0',9(27)>, price: #<BigDecimal:7fd14297ae58,'0.1E3',9(18)>, created_at: "2016-12-27 00:14:32", updated_at: "2016-12-27 00:14:32">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (12.68ms)
Completed 201 Created in 141ms (Views: 13.8ms | ActiveRecord: 6.2ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:20:26 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 90ms (ActiveRecord: 3.2ms)


  
NoMethodError (undefined method `create_invoice_number' for #<Invoice:0x007fd1428c2a38>
Did you mean?  restore_invoice_number!):
  
app/presenters/invoice_presenter.rb:14:in `block in save'
app/presenters/invoice_presenter.rb:13:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-27 00:20:42 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-300000"], ["total_amount", #<BigDecimal:7fd1407550f8,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd140755008,'0.0',9(18)>], ["created_at", 2016-12-27 00:20:42 UTC], ["updated_at", 2016-12-27 00:20:42 UTC]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 4], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd1406f6968,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd1406f6198,'0.0',9(27)>], ["price", #<BigDecimal:7fd1406f5888,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:20:42 UTC], ["updated_at", 2016-12-27 00:20:42 UTC]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.2ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 4]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 4, invoice_id: 4, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd1402974a8,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd1402971d8,'0.0',9(27)>, price: #<BigDecimal:7fd140296dc8,'0.1E3',9(18)>, created_at: "2016-12-27 00:20:42", updated_at: "2016-12-27 00:20:42">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (17.48ms)
Completed 201 Created in 124ms (Views: 19.9ms | ActiveRecord: 6.1ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:20:59 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000004"], ["total_amount", #<BigDecimal:7fd13cd00010,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd14303beb8,'0.0',9(18)>], ["created_at", 2016-12-27 00:20:59 UTC], ["updated_at", 2016-12-27 00:20:59 UTC]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 5], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13cceaaf8,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13ccea698,'0.0',9(27)>], ["price", #<BigDecimal:7fd13ccea1e8,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:20:59 UTC], ["updated_at", 2016-12-27 00:20:59 UTC]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 5], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.2ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 5]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 5, invoice_id: 5, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd1405c6c28,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd1405c6b38,'0.0',9(27)>, price: #<BigDecimal:7fd1405c69a8,'0.1E3',9(18)>, created_at: "2016-12-27 00:20:59", updated_at: "2016-12-27 00:20:59">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (16.68ms)
Completed 201 Created in 135ms (Views: 17.9ms | ActiveRecord: 6.2ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:25:22 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 78ms (ActiveRecord: 3.5ms)


  
ActiveRecord::RecordInvalid (Validation failed: Invoice lines invoice must contain at least one item):
  
app/presenters/invoice_presenter.rb:14:in `block in save'
app/presenters/invoice_presenter.rb:13:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-27 00:26:35 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 422 Unprocessable Entity in 72ms (ActiveRecord: 3.5ms)


  
ActiveRecord::RecordInvalid (Validation failed: Invoice lines invoice must contain at least one item):
  
app/presenters/invoice_presenter.rb:14:in `block in save'
app/presenters/invoice_presenter.rb:13:in `save'
app/controllers/invoices_controller.rb:11:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-27 00:27:50 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
Completed 500 Internal Server Error in 35ms (ActiveRecord: 1.5ms)


  
NoMethodError (undefined method `product' for #<ActiveSupport::HashWithIndifferentAccess:0x007fd140118fa0>):
  
app/presenters/invoice_presenter.rb:44:in `block in absence_of_duplicate_lines'
app/presenters/invoice_presenter.rb:44:in `select'
app/presenters/invoice_presenter.rb:44:in `absence_of_duplicate_lines'
app/controllers/invoices_controller.rb:10:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-27 00:28:29 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
Completed 500 Internal Server Error in 46ms (ActiveRecord: 2.2ms)


  
NoMethodError (undefined method `product' for #<ActiveSupport::HashWithIndifferentAccess:0x007fd1430736b0>):
  
app/presenters/invoice_presenter.rb:44:in `block in absence_of_duplicate_lines'
app/presenters/invoice_presenter.rb:44:in `select'
app/presenters/invoice_presenter.rb:44:in `absence_of_duplicate_lines'
app/controllers/invoices_controller.rb:10:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-27 00:28:48 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
Completed 500 Internal Server Error in 43ms (ActiveRecord: 1.9ms)


  
NoMethodError (undefined method `product_id' for #<ActiveSupport::HashWithIndifferentAccess:0x007fd1430b8c60>):
  
app/presenters/invoice_presenter.rb:44:in `block in absence_of_duplicate_lines'
app/presenters/invoice_presenter.rb:44:in `select'
app/presenters/invoice_presenter.rb:44:in `absence_of_duplicate_lines'
app/controllers/invoices_controller.rb:10:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-27 00:29:23 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
Completed 500 Internal Server Error in 40ms (ActiveRecord: 1.4ms)


  
NameError (undefined local variable or method `error' for #<InvoicePresenter:0x007fd13ab9adf8>
Did you mean?  errors
               @errors):
  
app/presenters/invoice_presenter.rb:46:in `absence_of_duplicate_lines'
app/controllers/invoices_controller.rb:10:in `create'
Started POST "/1/invoices" for ::1 at 2016-12-27 00:29:38 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.94ms)
Completed 422 Unprocessable Entity in 49ms (Views: 9.9ms | ActiveRecord: 1.8ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:29:58 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.1ms)
Completed 422 Unprocessable Entity in 5ms (Views: 0.5ms | ActiveRecord: 0.2ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:31:08 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000005"], ["total_amount", #<BigDecimal:7fd14057d1b8,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd14057cf88,'0.0',9(18)>], ["created_at", 2016-12-27 00:31:08 UTC], ["updated_at", 2016-12-27 00:31:08 UTC]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 6], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd14038c020,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd140386300,'0.0',9(27)>], ["price", #<BigDecimal:7fd1403846b8,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:31:08 UTC], ["updated_at", 2016-12-27 00:31:08 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 6], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 6]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 6, invoice_id: 6, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13c6ae018,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13c6adeb0,'0.0',9(27)>, price: #<BigDecimal:7fd13c6adca8,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:08", updated_at: "2016-12-27 00:31:08">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (12.71ms)
Completed 201 Created in 119ms (Views: 13.9ms | ActiveRecord: 6.1ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:31:12 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.0ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000006"], ["total_amount", #<BigDecimal:7fd13ba2c970,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd13ba2c628,'0.0',9(18)>], ["created_at", 2016-12-27 00:31:12 UTC], ["updated_at", 2016-12-27 00:31:12 UTC]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 7], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13ba1d308,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13ba1c5e8,'0.0',9(27)>], ["price", #<BigDecimal:7fd13ba17d68,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:31:12 UTC], ["updated_at", 2016-12-27 00:31:12 UTC]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 7], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 7]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 7, invoice_id: 7, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13b9aeb38,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13b9ae890,'0.0',9(27)>, price: #<BigDecimal:7fd13b9ad8a0,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:12", updated_at: "2016-12-27 00:31:12">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (4.61ms)
Completed 201 Created in 31ms (Views: 5.5ms | ActiveRecord: 4.1ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:31:14 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000007"], ["total_amount", #<BigDecimal:7fd1428eb460,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd1428eb348,'0.0',9(18)>], ["created_at", 2016-12-27 00:31:14 UTC], ["updated_at", 2016-12-27 00:31:14 UTC]]
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 8], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd14285a438,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd14285a078,'0.0',9(27)>], ["price", #<BigDecimal:7fd142859bc8,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:31:14 UTC], ["updated_at", 2016-12-27 00:31:14 UTC]]
  [1m[35m (1.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 8], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 8]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 8, invoice_id: 8, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd1430836c8,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd143083498,'0.0',9(27)>, price: #<BigDecimal:7fd1430831c8,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:14", updated_at: "2016-12-27 00:31:14">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (8.53ms)
Completed 201 Created in 30ms (Views: 8.9ms | ActiveRecord: 2.9ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:31:15 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.0ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000008"], ["total_amount", #<BigDecimal:7fd14290b648,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd14290b508,'0.0',9(18)>], ["created_at", 2016-12-27 00:31:15 UTC], ["updated_at", 2016-12-27 00:31:15 UTC]]
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 9], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd142902098,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd142901b98,'0.0',9(27)>], ["price", #<BigDecimal:7fd142901698,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:31:15 UTC], ["updated_at", 2016-12-27 00:31:15 UTC]]
  [1m[35m (7.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 9], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.2ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 9]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 9, invoice_id: 9, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13cf6a198,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13cf6a0a8,'0.0',9(27)>, price: #<BigDecimal:7fd13cf69ec8,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:15", updated_at: "2016-12-27 00:31:15">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (5.81ms)
Completed 201 Created in 38ms (Views: 6.4ms | ActiveRecord: 9.8ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:31:16 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.0ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000009"], ["total_amount", #<BigDecimal:7fd13ce20a80,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd13ce20990,'0.0',9(18)>], ["created_at", 2016-12-27 00:31:16 UTC], ["updated_at", 2016-12-27 00:31:16 UTC]]
  [1m[36mInvoice Load (0.0ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 10], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13cda8080,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13cd939a0,'0.0',9(27)>], ["price", #<BigDecimal:7fd13cd934a0,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:31:16 UTC], ["updated_at", 2016-12-27 00:31:16 UTC]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 10], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 10]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 10, invoice_id: 10, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13aea6510,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13aea63f8,'0.0',9(27)>, price: #<BigDecimal:7fd13aea6218,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:16", updated_at: "2016-12-27 00:31:16">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (2.69ms)
Completed 201 Created in 18ms (Views: 3.1ms | ActiveRecord: 2.3ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:31:16 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000010"], ["total_amount", #<BigDecimal:7fd13cee2ec8,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd13cee2d88,'0.0',9(18)>], ["created_at", 2016-12-27 00:31:16 UTC], ["updated_at", 2016-12-27 00:31:16 UTC]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 11], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13cea0cd0,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13cea0848,'0.0',9(27)>], ["price", #<BigDecimal:7fd13cea02f8,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:31:16 UTC], ["updated_at", 2016-12-27 00:31:16 UTC]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 11], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (1.7ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 11]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 11, invoice_id: 11, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bb92ff8,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bb92dc8,'0.0',9(27)>, price: #<BigDecimal:7fd13bb92968,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:16", updated_at: "2016-12-27 00:31:16">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (6.63ms)
Completed 201 Created in 30ms (Views: 5.5ms | ActiveRecord: 5.0ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:31:17 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.0ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000011"], ["total_amount", #<BigDecimal:7fd14013a588,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd14013a0b0,'0.0',9(18)>], ["created_at", 2016-12-27 00:31:17 UTC], ["updated_at", 2016-12-27 00:31:17 UTC]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 12], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13bb1d820,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13bb1d050,'0.0',9(27)>], ["price", #<BigDecimal:7fd13bb1cb00,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:31:17 UTC], ["updated_at", 2016-12-27 00:31:17 UTC]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.5ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 12], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.2ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 12]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 12, invoice_id: 12, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd140000410,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd140000320,'0.0',9(27)>, price: #<BigDecimal:7fd1400000c8,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:17", updated_at: "2016-12-27 00:31:17">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (4.54ms)
Completed 201 Created in 24ms (Views: 5.3ms | ActiveRecord: 2.6ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:31:18 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000012"], ["total_amount", #<BigDecimal:7fd13c37fcc0,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd13c37f540,'0.0',9(18)>], ["created_at", 2016-12-27 00:31:18 UTC], ["updated_at", 2016-12-27 00:31:18 UTC]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 13], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13c316568,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13c307888,'0.0',9(27)>], ["price", #<BigDecimal:7fd13c306758,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:31:18 UTC], ["updated_at", 2016-12-27 00:31:18 UTC]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 13], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 13]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 13, invoice_id: 13, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13b8575f0,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13b856948,'0.0',9(27)>, price: #<BigDecimal:7fd13b854f30,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:18", updated_at: "2016-12-27 00:31:18">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (4.76ms)
Completed 201 Created in 33ms (Views: 5.6ms | ActiveRecord: 3.3ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:31:19 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.0ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000013"], ["total_amount", #<BigDecimal:7fd13ca00f90,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd13ca00ea0,'0.0',9(18)>], ["created_at", 2016-12-27 00:31:19 UTC], ["updated_at", 2016-12-27 00:31:19 UTC]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 14], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13ac70d40,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13ac70570,'0.0',9(27)>], ["price", #<BigDecimal:7fd13ca6f878,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:31:19 UTC], ["updated_at", 2016-12-27 00:31:19 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 14], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 14]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 14, invoice_id: 14, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd1400136a0,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd1400134e8,'0.0',9(27)>, price: #<BigDecimal:7fd140012f98,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:19", updated_at: "2016-12-27 00:31:19">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (3.46ms)
Completed 201 Created in 22ms (Views: 3.7ms | ActiveRecord: 2.8ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:31:20 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000014"], ["total_amount", #<BigDecimal:7fd13adb2a50,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd13adb2938,'0.0',9(18)>], ["created_at", 2016-12-27 00:31:20 UTC], ["updated_at", 2016-12-27 00:31:20 UTC]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 15], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13bc8ab90,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13bc8a460,'0.0',9(27)>], ["price", #<BigDecimal:7fd13bc897e0,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:31:20 UTC], ["updated_at", 2016-12-27 00:31:20 UTC]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 15], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 15]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 15, invoice_id: 15, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd140755378,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd140755260,'0.0',9(27)>, price: #<BigDecimal:7fd1407550d0,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:20", updated_at: "2016-12-27 00:31:20">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (2.46ms)
Completed 201 Created in 28ms (Views: 2.9ms | ActiveRecord: 3.9ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:31:21 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.0ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.0ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000015"], ["total_amount", #<BigDecimal:7fd140616c28,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd140616a98,'0.0',9(18)>], ["created_at", 2016-12-27 00:31:21 UTC], ["updated_at", 2016-12-27 00:31:21 UTC]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 16], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd140713630,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd140712f00,'0.0',9(27)>], ["price", #<BigDecimal:7fd1407127f8,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:31:21 UTC], ["updated_at", 2016-12-27 00:31:21 UTC]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 16], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.2ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 16]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 16, invoice_id: 16, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd140558570,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd140558430,'0.0',9(27)>, price: #<BigDecimal:7fd140558188,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:21", updated_at: "2016-12-27 00:31:21">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (5.87ms)
Completed 201 Created in 24ms (Views: 6.5ms | ActiveRecord: 2.5ms)


  [1m[36mInvoiceLine Load (8.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines"[0m
Started GET "/1/invoices" for ::1 at 2016-12-27 00:33:49 +0000
Processing by InvoicesController#index as */*
  Parameters: {"tenant_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[36mInvoiceLine Load (0.6ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16)[0m
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 1, invoice_id: 1, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd1428439e0,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd1428438f0,'0.0',9(27)>, price: #<BigDecimal:7fd142843698,'0.1E3',9(18)>, created_at: "2016-12-27 00:13:45", updated_at: "2016-12-27 00:13:45">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 2, invoice_id: 2, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13af06398,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13af062a8,'0.0',9(27)>, price: #<BigDecimal:7fd13af06140,'0.1E3',9(18)>, created_at: "2016-12-27 00:14:22", updated_at: "2016-12-27 00:14:22">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 3, invoice_id: 3, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13be213f0,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13be21300,'0.0',9(27)>, price: #<BigDecimal:7fd13be21198,'0.1E3',9(18)>, created_at: "2016-12-27 00:14:32", updated_at: "2016-12-27 00:14:32">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 4, invoice_id: 4, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bdf0340,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bdf0228,'0.0',9(27)>, price: #<BigDecimal:7fd13bdf0098,'0.1E3',9(18)>, created_at: "2016-12-27 00:20:42", updated_at: "2016-12-27 00:20:42">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 5, invoice_id: 5, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13ce0adc0,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13ce0ac80,'0.0',9(27)>, price: #<BigDecimal:7fd13ce0ab18,'0.1E3',9(18)>, created_at: "2016-12-27 00:20:59", updated_at: "2016-12-27 00:20:59">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 6, invoice_id: 6, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bdb25b8,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bdb24c8,'0.0',9(27)>, price: #<BigDecimal:7fd13bdb2360,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:08", updated_at: "2016-12-27 00:31:08">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 7, invoice_id: 7, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bd9a3a0,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bd9a2b0,'0.0',9(27)>, price: #<BigDecimal:7fd13bd9a148,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:12", updated_at: "2016-12-27 00:31:12">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 8, invoice_id: 8, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bbc1a10,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bbc1920,'0.0',9(27)>, price: #<BigDecimal:7fd13bbc17b8,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:14", updated_at: "2016-12-27 00:31:14">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 9, invoice_id: 9, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13cdc8bc8,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13cdc8a38,'0.0',9(27)>, price: #<BigDecimal:7fd13cdc8858,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:15", updated_at: "2016-12-27 00:31:15">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 10, invoice_id: 10, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13addc198,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13addc0a8,'0.0',9(27)>, price: #<BigDecimal:7fd13bba7ef8,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:16", updated_at: "2016-12-27 00:31:16">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 11, invoice_id: 11, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13cf73a90,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13cf739a0,'0.0',9(27)>, price: #<BigDecimal:7fd13cf73838,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:16", updated_at: "2016-12-27 00:31:16">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 12, invoice_id: 12, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd1428d3090,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd1428d2fa0,'0.0',9(27)>, price: #<BigDecimal:7fd1428d2e38,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:17", updated_at: "2016-12-27 00:31:17">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 13, invoice_id: 13, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bbd2f18,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bbd2e28,'0.0',9(27)>, price: #<BigDecimal:7fd13bbd2cc0,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:18", updated_at: "2016-12-27 00:31:18">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 14, invoice_id: 14, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bdfaf70,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bdfae80,'0.0',9(27)>, price: #<BigDecimal:7fd13bdfad18,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:19", updated_at: "2016-12-27 00:31:19">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 15, invoice_id: 15, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13adc69d8,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13adc68e8,'0.0',9(27)>, price: #<BigDecimal:7fd13adc6780,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:20", updated_at: "2016-12-27 00:31:20">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 16, invoice_id: 16, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13ccb2928,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13ccb27e8,'0.0',9(27)>, price: #<BigDecimal:7fd13ccb2630,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:21", updated_at: "2016-12-27 00:31:21">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 1, invoice_id: 1, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd1428439e0,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd1428438f0,'0.0',9(27)>, price: #<BigDecimal:7fd142843698,'0.1E3',9(18)>, created_at: "2016-12-27 00:13:45", updated_at: "2016-12-27 00:13:45">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 2, invoice_id: 2, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13af06398,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13af062a8,'0.0',9(27)>, price: #<BigDecimal:7fd13af06140,'0.1E3',9(18)>, created_at: "2016-12-27 00:14:22", updated_at: "2016-12-27 00:14:22">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 3, invoice_id: 3, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13be213f0,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13be21300,'0.0',9(27)>, price: #<BigDecimal:7fd13be21198,'0.1E3',9(18)>, created_at: "2016-12-27 00:14:32", updated_at: "2016-12-27 00:14:32">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 4, invoice_id: 4, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bdf0340,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bdf0228,'0.0',9(27)>, price: #<BigDecimal:7fd13bdf0098,'0.1E3',9(18)>, created_at: "2016-12-27 00:20:42", updated_at: "2016-12-27 00:20:42">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 5, invoice_id: 5, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13ce0adc0,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13ce0ac80,'0.0',9(27)>, price: #<BigDecimal:7fd13ce0ab18,'0.1E3',9(18)>, created_at: "2016-12-27 00:20:59", updated_at: "2016-12-27 00:20:59">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 6, invoice_id: 6, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bdb25b8,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bdb24c8,'0.0',9(27)>, price: #<BigDecimal:7fd13bdb2360,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:08", updated_at: "2016-12-27 00:31:08">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 7, invoice_id: 7, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bd9a3a0,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bd9a2b0,'0.0',9(27)>, price: #<BigDecimal:7fd13bd9a148,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:12", updated_at: "2016-12-27 00:31:12">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 8, invoice_id: 8, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bbc1a10,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bbc1920,'0.0',9(27)>, price: #<BigDecimal:7fd13bbc17b8,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:14", updated_at: "2016-12-27 00:31:14">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 9, invoice_id: 9, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13cdc8bc8,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13cdc8a38,'0.0',9(27)>, price: #<BigDecimal:7fd13cdc8858,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:15", updated_at: "2016-12-27 00:31:15">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 10, invoice_id: 10, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13addc198,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13addc0a8,'0.0',9(27)>, price: #<BigDecimal:7fd13bba7ef8,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:16", updated_at: "2016-12-27 00:31:16">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 11, invoice_id: 11, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13cf73a90,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13cf739a0,'0.0',9(27)>, price: #<BigDecimal:7fd13cf73838,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:16", updated_at: "2016-12-27 00:31:16">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 12, invoice_id: 12, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd1428d3090,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd1428d2fa0,'0.0',9(27)>, price: #<BigDecimal:7fd1428d2e38,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:17", updated_at: "2016-12-27 00:31:17">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 13, invoice_id: 13, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bbd2f18,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bbd2e28,'0.0',9(27)>, price: #<BigDecimal:7fd13bbd2cc0,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:18", updated_at: "2016-12-27 00:31:18">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 14, invoice_id: 14, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13bdfaf70,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13bdfae80,'0.0',9(27)>, price: #<BigDecimal:7fd13bdfad18,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:19", updated_at: "2016-12-27 00:31:19">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 15, invoice_id: 15, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13adc69d8,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13adc68e8,'0.0',9(27)>, price: #<BigDecimal:7fd13adc6780,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:20", updated_at: "2016-12-27 00:31:20">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 16, invoice_id: 16, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13ccb2928,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13ccb27e8,'0.0',9(27)>, price: #<BigDecimal:7fd13ccb2630,'0.1E3',9(18)>, created_at: "2016-12-27 00:31:21", updated_at: "2016-12-27 00:31:21">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (44.93ms)
Completed 200 OK in 125ms (Views: 76.2ms | ActiveRecord: 5.5ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:34:10 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.3ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000016"], ["total_amount", #<BigDecimal:7fd1404d6390,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd1404d62a0,'0.0',9(18)>], ["created_at", 2016-12-27 00:34:10 UTC], ["updated_at", 2016-12-27 00:34:10 UTC]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 17], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13cb958d8,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13cb954f0,'0.0',9(27)>], ["price", #<BigDecimal:7fd13cb950e0,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:34:10 UTC], ["updated_at", 2016-12-27 00:34:10 UTC]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 17], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.2ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 17]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 17, invoice_id: 17, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd143030090,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13f033f50,'0.0',9(27)>, price: #<BigDecimal:7fd13f033de8,'0.1E3',9(18)>, created_at: "2016-12-27 00:34:10", updated_at: "2016-12-27 00:34:10">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (2.85ms)
Completed 201 Created in 76ms (Views: 3.2ms | ActiveRecord: 5.2ms)


Started POST "/1/invoices" for ::1 at 2016-12-27 00:35:16 +0000
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.2ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000017"], ["total_amount", #<BigDecimal:7fd13c726158,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd13c725f50,'0.0',9(18)>], ["created_at", 2016-12-27 00:35:16 UTC], ["updated_at", 2016-12-27 00:35:16 UTC]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 18], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13bab8128,'0.0',9(27)>], ["discount_flat", #<BigDecimal:7fd13c68fa50,'0.0',9(27)>], ["price", #<BigDecimal:7fd13c68f3c0,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:35:16 UTC], ["updated_at", 2016-12-27 00:35:16 UTC]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 18], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.2ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 18]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 18, invoice_id: 18, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd13c3cd330,'0.0',9(27)>, discount_flat: #<BigDecimal:7fd13c3cd1c8,'0.0',9(27)>, price: #<BigDecimal:7fd13c3ccd68,'0.1E3',9(18)>, created_at: "2016-12-27 00:35:16", updated_at: "2016-12-27 00:35:16">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (18.78ms)
Completed 201 Created in 152ms (Views: 20.1ms | ActiveRecord: 7.3ms)


  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInvoiceLines (20161226162340)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "invoice_lines"[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20161226162340"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInvoiceLines (20161226162340)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "invoice_lines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "invoice_id" integer, "product_id" integer, "description" text, "quantity" integer, "discount_percentage" decimal, "discount_flat" decimal, "price" decimal(19,2), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoice_lines_on_invoice_id" ON "invoice_lines" ("invoice_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoice_lines_on_product_id" ON "invoice_lines" ("product_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226162340"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInvoiceLines (20161226162340)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE "invoice_lines"[0m
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20161226162340"]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInvoiceLines (20161226162340)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "invoice_lines" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "invoice_id" integer, "product_id" integer, "description" text, "quantity" integer, "discount_percentage" decimal(19,2), "discount_flat" decimal(19,2), "price" decimal(19,2), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoice_lines_on_invoice_id" ON "invoice_lines" ("invoice_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_invoice_lines_on_product_id" ON "invoice_lines" ("product_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226162340"]]
  [1m[35m (6.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
Started POST "/1/invoices" for ::1 at 2016-12-27 00:38:21 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by InvoicesController#create as */*
  Parameters: {"invoice"=>{"invoice_date"=>"2016-12-30T01:26:20.846Z", "due_date"=>"2016-12-30T01:17:20.846Z", "client_id"=>1, "currency_id"=>1, "invoice_lines"=>[{"product_id"=>1, "price"=>"100.00", "description"=>"Nice & soft bread", "quantity"=>1, "discount_percentage"=>0, "discount_flat"=>0}]}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Unpermitted parameter: description
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.2ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "invoices" ("account_id", "due_date", "invoice_date", "client_id", "currency_id", "invoice_number", "total_amount", "total_tax", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["account_id", 1], ["due_date", 2016-12-30 01:17:20 UTC], ["invoice_date", 2016-12-30 01:26:20 UTC], ["client_id", 1], ["currency_id", 1], ["invoice_number", "INV-000018"], ["total_amount", #<BigDecimal:7fd140711448,'0.0',9(18)>], ["total_tax", #<BigDecimal:7fd140711308,'0.0',9(18)>], ["created_at", 2016-12-27 00:38:22 UTC], ["updated_at", 2016-12-27 00:38:22 UTC]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."id" = ? LIMIT ?[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "invoice_lines" ("invoice_id", "product_id", "quantity", "discount_percentage", "discount_flat", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["invoice_id", 19], ["product_id", 1], ["quantity", 1], ["discount_percentage", #<BigDecimal:7fd13cbc2f40,'0.0',9(18)>], ["discount_flat", #<BigDecimal:7fd13cbc29c8,'0.0',9(18)>], ["price", #<BigDecimal:7fd13cbc24f0,'0.1E3',9(18)>], ["created_at", 2016-12-27 00:38:22 UTC], ["updated_at", 2016-12-27 00:38:22 UTC]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ? AND "invoices"."id" = ? LIMIT ?[0m  [["account_id", 1], ["id", 19], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mInvoiceLine Load (0.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 19]]
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 1, invoice_id: 19, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7fd1407acc68,'0.0',9(18)>, discount_flat: #<BigDecimal:7fd1407acb28,'0.0',9(18)>, price: #<BigDecimal:7fd1407ac9e8,'0.1E3',9(18)>, created_at: "2016-12-27 00:38:22", updated_at: "2016-12-27 00:38:22">
[active_model_serializers] Rendered InvoiceSerializer with ActiveModelSerializers::Adapter::Attributes (12.33ms)
Completed 201 Created in 122ms (Views: 13.4ms | ActiveRecord: 6.0ms)


Started POST "/1/products" for ::1 at 2016-12-27 10:51:00 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Ring doughnut", "description"=>"With sugar coating", "product_type"=>"consumable", "reorder_level"=>123, "can_be_sold"=>true, "can_be_purchased"=>true}, "tenant_id"=>"1"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "product_type", "reorder_level", "can_be_sold", "can_be_purchased", "created_at", "updated_at", "account_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Ring doughnut"], ["description", "With sugar coating"], ["product_type", "consumable"], ["reorder_level", 123], ["can_be_sold", true], ["can_be_purchased", true], ["created_at", 2016-12-27 10:51:00 UTC], ["updated_at", 2016-12-27 10:51:00 UTC], ["account_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[36mcommit transaction[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Product (1.9ms)
Completed 200 OK in 65ms (Views: 19.2ms | ActiveRecord: 3.5ms)


Started GET "/7/clients" for ::1 at 2016-12-27 12:01:11 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ClientsController#index as */*
  Parameters: {"tenant_id"=>"7"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 50ms (ActiveRecord: 0.0ms)


Started GET "/1/invoices" for ::1 at 2016-12-27 12:01:23 +0000
Processing by InvoicesController#index as */*
  Parameters: {"tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mInvoice Load (0.3ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[36mInvoiceLine Load (0.4ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19)[0m
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 1, invoice_id: 19, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7f9fa810aaa0,'0.0',9(18)>, discount_flat: #<BigDecimal:7f9fa810a910,'0.0',9(18)>, price: #<BigDecimal:7f9fa810a780,'0.1E3',9(18)>, created_at: "2016-12-27 00:38:22", updated_at: "2016-12-27 00:38:22">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 1, invoice_id: 19, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7f9fa810aaa0,'0.0',9(18)>, discount_flat: #<BigDecimal:7f9fa810a910,'0.0',9(18)>, price: #<BigDecimal:7f9fa810a780,'0.1E3',9(18)>, created_at: "2016-12-27 00:38:22", updated_at: "2016-12-27 00:38:22">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (35.02ms)
Completed 200 OK in 156ms (Views: 85.7ms | ActiveRecord: 3.0ms)


Started GET "/7/clients" for ::1 at 2016-12-27 12:01:31 +0000
Processing by ClientsController#index as */*
  Parameters: {"tenant_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Filter chain halted as :switch_tenant rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started GET "/1/invoices" for ::1 at 2016-12-27 12:01:37 +0000
Processing by InvoicesController#index as */*
  Parameters: {"tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mInvoice Load (0.4ms)[0m  [1m[34mSELECT "invoices".* FROM "invoices" WHERE "invoices"."account_id" = ?[0m  [["account_id", 1]]
  [1m[36mInvoiceLine Load (0.3ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" IN (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19)[0m
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 1, invoice_id: 19, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7f9fa6837708,'0.0',9(18)>, discount_flat: #<BigDecimal:7f9fa6837550,'0.0',9(18)>, price: #<BigDecimal:7f9fa68372d0,'0.1E3',9(18)>, created_at: "2016-12-27 00:38:22", updated_at: "2016-12-27 00:38:22">
[active_model_serializers] No serializer found for resource: #<InvoiceLine id: 1, invoice_id: 19, product_id: 1, description: nil, quantity: 1, discount_percentage: #<BigDecimal:7f9fa6837708,'0.0',9(18)>, discount_flat: #<BigDecimal:7f9fa6837550,'0.0',9(18)>, price: #<BigDecimal:7f9fa68372d0,'0.1E3',9(18)>, created_at: "2016-12-27 00:38:22", updated_at: "2016-12-27 00:38:22">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (30.84ms)
Completed 200 OK in 40ms (Views: 35.1ms | ActiveRecord: 1.1ms)


Started GET "/7/clients" for ::1 at 2016-12-27 12:01:46 +0000
Processing by ClientsController#index as */*
  Parameters: {"tenant_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Filter chain halted as :switch_tenant rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms)


Started GET "/7/clients" for ::1 at 2016-12-27 12:01:47 +0000
Processing by ClientsController#index as */*
  Parameters: {"tenant_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
Filter chain halted as :switch_tenant rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)


Started GET "/1/clients" for ::1 at 2016-12-27 12:01:51 +0000
Processing by ClientsController#index as */*
  Parameters: {"tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE "clients"."account_id" = ?[0m  [["account_id", 1]]
No serializer found for resource: #<Client id: 1, name: "Peter", email: "samza@mailx.com", phone_number: "0123456789", address: "some 1234 street bi", created_at: "2016-12-26 17:03:02", updated_at: "2016-12-26 17:03:02", account_id: 1>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Client::ActiveRecord_Associations_CollectionProxy (0.41ms)
Completed 200 OK in 21ms (Views: 13.6ms | ActiveRecord: 0.9ms)


Started POST "/1/products" for ::1 at 2016-12-27 12:12:53 +0000
Processing by ProductsController#create as */*
  Parameters: {"product"=>{"name"=>"Ring doughnut", "description"=>"With sugar coating", "product_type"=>"consumable", "reorder_level"=>123, "can_be_sold"=>true, "can_be_purchased"=>true}, "tenant_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.4ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "product_type", "reorder_level", "can_be_sold", "can_be_purchased", "created_at", "updated_at", "account_id") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Ring doughnut"], ["description", "With sugar coating"], ["product_type", "consumable"], ["reorder_level", 123], ["can_be_sold", true], ["can_be_purchased", true], ["created_at", 2016-12-27 12:12:53 UTC], ["updated_at", 2016-12-27 12:12:53 UTC], ["account_id", 1]]
  [1m[35m (1.7ms)[0m  [1m[36mcommit transaction[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Product (2.65ms)
Completed 200 OK in 50ms (Views: 13.6ms | ActiveRecord: 3.9ms)


Started GET "/1/products" for ::1 at 2016-12-27 12:13:10 +0000
Processing by ProductsController#index as */*
  Parameters: {"tenant_id"=>"1", "product"=>{}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" INNER JOIN "account_details" ON "accounts"."id" = "account_details"."account_id" WHERE "account_details"."user_id" = ?[0m  [["user_id", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."account_id" = ?[0m  [["account_id", 1]]
No serializer found for resource: #<Product id: 1, name: "Peter Bread", description: "Flat and Nice and soft", text: nil, product_type: "consumable", reorder_level: 123, can_be_sold: true, can_be_purchased: true, created_at: "2016-12-26 17:19:11", updated_at: "2016-12-26 17:19:11", account_id: 1>
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with Product::ActiveRecord_Associations_CollectionProxy (0.82ms)
Completed 200 OK in 10ms (Views: 4.2ms | ActiveRecord: 0.4ms)


  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddStatusToInvoice (20161228164423)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "invoices" ADD "status" varchar[0m
  [1m[35mSQL (3.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161228164423"]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_account_details_on_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_account_details_on_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_clients_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_clients_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_currency_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_client_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_client_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoices_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoices_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_product_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_invoice_lines_on_invoice_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_account_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_taxes_on_account_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_taxes_on_account_id' AND type='index'
[0m
  [1m[35m (7.8ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" ORDER BY "invoices"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mInvoice Load (0.1ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" ORDER BY "invoices"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvoiceLine Load (0.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 19]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "total_amount" = ?, "updated_at" = ?, "status" = ? WHERE "invoices"."id" = ?[0m  [["total_amount", #<BigDecimal:7fda318b0ed0,'0.1E3',9(18)>], ["updated_at", 2016-12-28 16:46:04 UTC], ["status", "active"], ["id", 19]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" ORDER BY "invoices"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" ORDER BY "invoices"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT  "accounts".* FROM "accounts" WHERE "accounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCurrency Load (0.1ms)[0m  [1m[34mSELECT  "currencies".* FROM "currencies" WHERE "currencies"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mInvoiceLine Load (0.1ms)[0m  [1m[34mSELECT "invoice_lines".* FROM "invoice_lines" WHERE "invoice_lines"."invoice_id" = ?[0m  [["invoice_id", 19]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "invoices" SET "updated_at" = ?, "status" = ? WHERE "invoices"."id" = ?[0m  [["updated_at", 2016-12-28 16:53:14 UTC], ["status", "draft"], ["id", 19]]
  [1m[35m (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (1.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "invoices" SET "updated_at" = ?, "status" = ? WHERE "invoices"."id" = ?[0m  [["updated_at", 2016-12-28 16:57:10 UTC], ["status", "approved"], ["id", 19]]
  [1m[35m (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mInvoice Load (0.2ms)[0m  [1m[34mSELECT  "invoices".* FROM "invoices" ORDER BY "invoices"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started POST "/user_token" for 127.0.0.1 at 2016-12-28 22:55:12 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"email"=>"kofimanu@Mail.com", "password"=>"[FILTERED]"}, "user_token"=>{"auth"=>{"email"=>"kofimanu@Mail.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofimanu@Mail.com"], ["LIMIT", 1]]
Completed 404 Not Found in 27ms (ActiveRecord: 0.4ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-28 22:56:35 +0000
Processing by UserTokenController#create as */*
  Parameters: {"auth"=>{"email"=>"kofiowusu@mail.comc", "password"=>"[FILTERED]"}, "user_token"=>{"auth"=>{"email"=>"kofiowusu@mail.comc", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.comc"], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.1ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-28 23:22:45 +0000
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"email"=>"soundfever18@gmail.com", "password"=>"[FILTERED]"}, "user_token"=>{"auth"=>{"email"=>"soundfever18@gmail.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "soundfever18@gmail.com"], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.1ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-28 23:24:56 +0000
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"email"=>"kofimanu@Mail.com", "password"=>"[FILTERED]"}, "user_token"=>{"auth"=>{"email"=>"kofimanu@Mail.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofimanu@Mail.com"], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (ActiveRecord: 0.1ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-28 23:25:37 +0000
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"email"=>"kofimanu@Mail.com", "password"=>"[FILTERED]"}, "user_token"=>{"auth"=>{"email"=>"kofimanu@Mail.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofimanu@Mail.com"], ["LIMIT", 1]]
Completed 404 Not Found in 6ms (ActiveRecord: 0.1ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-28 23:41:42 +0000
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"password"=>"[FILTERED]", "email"=>"kofiowusu@mail.com"}, "user_token"=>{"auth"=>{"password"=>"[FILTERED]", "email"=>"kofiowusu@mail.com"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.com"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Knock::AuthToken (0.12ms)
Completed 201 Created in 108ms (Views: 6.6ms | ActiveRecord: 0.5ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-28 23:41:55 +0000
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"password"=>"[FILTERED]", "email"=>"kofiowusu@mail.com"}, "user_token"=>{"auth"=>{"password"=>"[FILTERED]", "email"=>"kofiowusu@mail.com"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.com"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Knock::AuthToken (0.07ms)
Completed 201 Created in 63ms (Views: 0.5ms | ActiveRecord: 0.1ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-28 23:41:57 +0000
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"password"=>"[FILTERED]", "email"=>"kofiowusu@mail.com"}, "user_token"=>{"auth"=>{"password"=>"[FILTERED]", "email"=>"kofiowusu@mail.com"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.com"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Knock::AuthToken (0.27ms)
Completed 201 Created in 63ms (Views: 0.7ms | ActiveRecord: 0.1ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-28 23:42:59 +0000
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}, "user_token"=>{"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.com"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Knock::AuthToken (0.07ms)
Completed 201 Created in 63ms (Views: 0.6ms | ActiveRecord: 0.1ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-29 00:26:30 +0000
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}, "user_token"=>{"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.com"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Knock::AuthToken (2.51ms)
Completed 201 Created in 202ms (Views: 17.1ms | ActiveRecord: 2.5ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-29 00:27:18 +0000
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}, "user_token"=>{"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.com"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Knock::AuthToken (7.58ms)
Completed 201 Created in 153ms (Views: 22.7ms | ActiveRecord: 0.1ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-29 01:03:30 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}, "user_token"=>{"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.com"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Knock::AuthToken (0.12ms)
Completed 201 Created in 112ms (Views: 5.0ms | ActiveRecord: 0.8ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-29 01:07:06 +0000
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}, "user_token"=>{"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.com"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Knock::AuthToken (0.08ms)
Completed 201 Created in 63ms (Views: 0.6ms | ActiveRecord: 0.1ms)


Started POST "/user_token" for 127.0.0.1 at 2016-12-29 01:07:42 +0000
Processing by UserTokenController#create as HTML
  Parameters: {"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}, "user_token"=>{"auth"=>{"email"=>"kofiowusu@mail.com", "password"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = ? LIMIT ?[0m  [["email", "kofiowusu@mail.com"], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Knock::AuthToken (0.07ms)
Completed 201 Created in 63ms (Views: 0.5ms | ActiveRecord: 0.1ms)


